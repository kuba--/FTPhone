<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//PL">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-2">
<title>short_term.c File Reference</title>
<link href="style.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#fffeff">
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>short_term.c File Reference</h1><code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;assert.h&gt;</code><br>
<code>#include "<a class="el" href="private_8h-source.html">private.h</a>"</code><br>
<code>#include "<a class="el" href="gsm_8h-source.html">gsm.h</a>"</code><br>
<code>#include "<a class="el" href="proto_8h-source.html">proto.h</a>"</code><br>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="short__term_8c.html#a0">STEP</a>(B, MIC, INVA)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="short__term_8c.html#a1">FILTER</a>&nbsp;&nbsp;&nbsp;Short_term_analysis_filtering</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="short__term_8c.html#a2">FILTER</a>&nbsp;&nbsp;&nbsp;Short_term_synthesis_filtering</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void Decoding_of_the_coded_Log_Area_Ratios&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="short__term_8c.html#a3">P2</a> ((LARc, LARpp), <a class="el" href="private_8h.html#a11">word</a> *LARc, <a class="el" href="private_8h.html#a11">word</a> *LARpp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void Coefficients_0_12&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="short__term_8c.html#a4">P3</a> ((LARpp_j_1, LARpp_j, LARp), register <a class="el" href="private_8h.html#a11">word</a> *LARpp_j_1, register <a class="el" href="private_8h.html#a11">word</a> *LARpp_j, register <a class="el" href="private_8h.html#a11">word</a> *LARp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void Coefficients_40_159&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="short__term_8c.html#a5">P2</a> ((LARpp_j, LARp), register <a class="el" href="private_8h.html#a11">word</a> *LARpp_j, register <a class="el" href="private_8h.html#a11">word</a> *LARp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void LARp_to_rp&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="short__term_8c.html#a6">P1</a> ((LARp), register <a class="el" href="private_8h.html#a11">word</a> *LARp)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void Short_term_analysis_filtering&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="short__term_8c.html#a7">P4</a> ((S, rp, k_n, s), struct <a class="el" href="structgsm__state.html">gsm_state</a> *S, register <a class="el" href="private_8h.html#a11">word</a> *rp, register int k_n, register <a class="el" href="private_8h.html#a11">word</a> *s)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void Short_term_synthesis_filtering&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="short__term_8c.html#a8">P5</a> ((S, rrp, k, wt, sr), struct <a class="el" href="structgsm__state.html">gsm_state</a> *S, register <a class="el" href="private_8h.html#a11">word</a> *rrp, register int k, register <a class="el" href="private_8h.html#a11">word</a> *wt, register <a class="el" href="private_8h.html#a11">word</a> *sr)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void Gsm_Short_Term_Analysis_Filter&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="short__term_8c.html#a9">P3</a> ((S, LARc, s), struct <a class="el" href="structgsm__state.html">gsm_state</a> *S, <a class="el" href="private_8h.html#a11">word</a> *LARc, <a class="el" href="private_8h.html#a11">word</a> *s)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void Gsm_Short_Term_Synthesis_Filter&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="short__term_8c.html#a10">P4</a> ((S, LARcr, wt, s), struct <a class="el" href="structgsm__state.html">gsm_state</a> *S, <a class="el" href="private_8h.html#a11">word</a> *LARcr, <a class="el" href="private_8h.html#a11">word</a> *wt, <a class="el" href="private_8h.html#a11">word</a> *s)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a2" doxytag="short_term.c::FILTER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FILTER&nbsp;&nbsp;&nbsp;Short_term_synthesis_filtering
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="short_term.c::FILTER" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FILTER&nbsp;&nbsp;&nbsp;Short_term_analysis_filtering
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="short_term.c::STEP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STEP</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">B,         <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>MIC,         <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>INVA&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre>temp1    = <a class="code" href="private_8h.html#a8">GSM_ADD</a>( *LARc++, MIC ) &lt;&lt; 10;   \
        temp1    = <a class="code" href="private_8h.html#a9">GSM_SUB</a>( temp1, B &lt;&lt; 1 );        \
        temp1    = <a class="code" href="private_8h.html#a4">GSM_MULT_R</a>( INVA, temp1 );       \
        *LARpp++ = <a class="code" href="private_8h.html#a8">GSM_ADD</a>( temp1, temp1 );
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a6" doxytag="short_term.c::P1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void LARp_to_rp P1 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(LARp)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>register <a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>LARp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00151 {
00152     <span class="keyword">register</span> <span class="keywordtype">int</span>        i;
00153     <span class="keyword">register</span> <a class="code" href="private_8h.html#a11">word</a>       temp;
00154     <span class="keyword">register</span> <a class="code" href="private_8h.html#a12">longword</a>   ltmp;
00155 
00156     <span class="keywordflow">for</span> (i = 1; i &lt;= 8; i++, LARp++) {
00157 
00158         <span class="comment">/* temp = GSM_ABS( *LARp );</span>
00159 <span class="comment">             *</span>
00160 <span class="comment">         * if (temp &lt; 11059) temp &lt;&lt;= 1;</span>
00161 <span class="comment">         * else if (temp &lt; 20070) temp += 11059;</span>
00162 <span class="comment">         * else temp = GSM_ADD( temp &gt;&gt; 2, 26112 );</span>
00163 <span class="comment">         *</span>
00164 <span class="comment">         * *LARp = *LARp &lt; 0 ? -temp : temp;</span>
00165 <span class="comment">         */</span>
00166 
00167         <span class="keywordflow">if</span> (*LARp &lt; 0) {
00168             temp = *LARp == <a class="code" href="private_8h.html#a0">MIN_WORD</a> ? <a class="code" href="private_8h.html#a1">MAX_WORD</a> : -(*LARp);
00169             *LARp = - ((temp &lt; 11059) ? temp &lt;&lt; 1
00170                 : ((temp &lt; 20070) ? temp + 11059
00171                 :  <a class="code" href="private_8h.html#a8">GSM_ADD</a>( temp &gt;&gt; 2, 26112 )));
00172         } <span class="keywordflow">else</span> {
00173             temp  = *LARp;
00174             *LARp =    (temp &lt; 11059) ? temp &lt;&lt; 1
00175                 : ((temp &lt; 20070) ? temp + 11059
00176                 :  <a class="code" href="private_8h.html#a8">GSM_ADD</a>( temp &gt;&gt; 2, 26112 ));
00177         }
00178     }
00179 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="short_term.c::P2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void Coefficients_40_159 P2 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(LARpp_j, LARp)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>register <a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>LARpp_j</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>register <a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>LARp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00135 {
00136     <span class="keyword">register</span> <span class="keywordtype">int</span> i;
00137 
00138     <span class="keywordflow">for</span> (i = 1; i &lt;= 8; i++, LARp++, LARpp_j++)
00139         *LARp = *LARpp_j;
00140 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="short_term.c::P2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void Decoding_of_the_coded_Log_Area_Ratios P2 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(LARc, LARpp)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>LARc</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>LARpp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00025                               : decoded ..          */
00026 {
00027     <span class="keyword">register</span> <a class="code" href="private_8h.html#a11">word</a>   temp1, temp2;
00028     <span class="keyword">register</span> <span class="keywordtype">long</span>   ltmp;   <span class="comment">/* for GSM_ADD */</span>
00029 
00030     <span class="comment">/*  This procedure requires for efficient implementation</span>
00031 <span class="comment">     *  two tables.</span>
00032 <span class="comment">     *</span>
00033 <span class="comment">     *  INVA[1..8] = integer( (32768 * 8) / real_A[1..8])</span>
00034 <span class="comment">     *  MIC[1..8]  = minimum value of the LARc[1..8]</span>
00035 <span class="comment">     */</span>
00036 
00037     <span class="comment">/*  Compute the LARpp[1..8]</span>
00038 <span class="comment">     */</span>
00039 
00040     <span class="comment">/*  for (i = 1; i &lt;= 8; i++, B++, MIC++, INVA++, LARc++, LARpp++) {</span>
00041 <span class="comment">     *</span>
00042 <span class="comment">     *      temp1  = GSM_ADD( *LARc, *MIC ) &lt;&lt; 10;</span>
00043 <span class="comment">     *      temp2  = *B &lt;&lt; 1;</span>
00044 <span class="comment">     *      temp1  = GSM_SUB( temp1, temp2 );</span>
00045 <span class="comment">     *</span>
00046 <span class="comment">     *      assert(*INVA != MIN_WORD);</span>
00047 <span class="comment">     *</span>
00048 <span class="comment">     *      temp1  = GSM_MULT_R( *INVA, temp1 );</span>
00049 <span class="comment">     *      *LARpp = GSM_ADD( temp1, temp1 );</span>
00050 <span class="comment">     *  }</span>
00051 <span class="comment">     */</span>
00052 
00053 <span class="preprocessor">#undef  STEP</span>
00054 <span class="preprocessor"></span><span class="preprocessor">#define STEP( B, MIC, INVA )    \</span>
00055 <span class="preprocessor">        temp1    = GSM_ADD( *LARc++, MIC ) &lt;&lt; 10;   \</span>
00056 <span class="preprocessor">        temp1    = GSM_SUB( temp1, B &lt;&lt; 1 );        \</span>
00057 <span class="preprocessor">        temp1    = GSM_MULT_R( INVA, temp1 );       \</span>
00058 <span class="preprocessor">        *LARpp++ = GSM_ADD( temp1, temp1 );</span>
00059 <span class="preprocessor"></span>
00060     STEP(      0,  -32,  13107 );
00061     STEP(      0,  -32,  13107 );
00062     STEP(   2048,  -16,  13107 );
00063     STEP(  -2560,  -16,  13107 );
00064 
00065     STEP(     94,   -8,  19223 );
00066     STEP(  -1792,   -8,  17476 );
00067     STEP(   -341,   -4,  31454 );
00068     STEP(  -1144,   -4,  29708 );
00069 
00070     <span class="comment">/* NOTE: the addition of *MIC is used to restore</span>
00071 <span class="comment">     *   the sign of *LARc.</span>
00072 <span class="comment">     */</span>
00073 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="short_term.c::P3" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void Gsm_Short_Term_Analysis_Filter P3 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(S, LARc, s)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>struct <a class="el" href="structgsm__state.html">gsm_state</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>LARc</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00353 {
00354     <a class="code" href="private_8h.html#a11">word</a>        * LARpp_j   = S-&gt;<a class="code" href="structgsm__state.html#o5">LARpp</a>[ S-&gt;<a class="code" href="structgsm__state.html#o6">j</a>      ];
00355     <a class="code" href="private_8h.html#a11">word</a>        * LARpp_j_1 = S-&gt;<a class="code" href="structgsm__state.html#o5">LARpp</a>[ S-&gt;<a class="code" href="structgsm__state.html#o6">j</a> ^= 1 ];
00356 
00357     <a class="code" href="private_8h.html#a11">word</a>        LARp[8];
00358 
00359 <span class="preprocessor">#undef  FILTER</span>
00360 <span class="preprocessor"></span><span class="preprocessor">#if     defined(FAST) &amp;&amp; defined(USE_FLOAT_MUL)</span>
00361 <span class="preprocessor"></span><span class="preprocessor">#   define  FILTER  (* (S-&gt;fast         \</span>
00362 <span class="preprocessor">               ? Fast_Short_term_analysis_filtering \</span>
00363 <span class="preprocessor">                   : Short_term_analysis_filtering  ))</span>
00364 <span class="preprocessor"></span>
00365 <span class="preprocessor">#else</span>
00366 <span class="preprocessor"></span><span class="preprocessor">#   define  FILTER  Short_term_analysis_filtering</span>
00367 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00368 <span class="preprocessor"></span>
00369     Decoding_of_the_coded_Log_Area_Ratios( LARc, LARpp_j );
00370 
00371     Coefficients_0_12(  LARpp_j_1, LARpp_j, LARp );
00372     LARp_to_rp( LARp );
00373     FILTER( S, LARp, 13, s);
00374 
00375     Coefficients_13_26( LARpp_j_1, LARpp_j, LARp);
00376     LARp_to_rp( LARp );
00377     FILTER( S, LARp, 14, s + 13);
00378 
00379     Coefficients_27_39( LARpp_j_1, LARpp_j, LARp);
00380     LARp_to_rp( LARp );
00381     FILTER( S, LARp, 13, s + 27);
00382 
00383     Coefficients_40_159( LARpp_j, LARp);
00384     LARp_to_rp( LARp );
00385     FILTER( S, LARp, 120, s + 40);
00386 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="short_term.c::P3" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void Coefficients_27_39 P3 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(LARpp_j_1, LARpp_j, LARp)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>register <a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>LARpp_j_1</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>register <a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>LARpp_j</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>register <a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>LARp</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00095 {
00096     <span class="keyword">register</span> <span class="keywordtype">int</span>    i;
00097     <span class="keyword">register</span> <a class="code" href="private_8h.html#a12">longword</a> ltmp;
00098 
00099     <span class="keywordflow">for</span> (i = 1; i &lt;= 8; i++, LARp++, LARpp_j_1++, LARpp_j++) {
00100         *LARp = <a class="code" href="private_8h.html#a8">GSM_ADD</a>( SASR( *LARpp_j_1, 2 ), SASR( *LARpp_j, 2 ));
00101         *LARp = <a class="code" href="private_8h.html#a8">GSM_ADD</a>( *LARp,  SASR( *LARpp_j_1, 1));
00102     }
00103 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="short_term.c::P4" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void Gsm_Short_Term_Synthesis_Filter P4 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(S, LARcr, wt, s)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>struct <a class="el" href="structgsm__state.html">gsm_state</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>LARcr</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>wt</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00396 {
00397     <a class="code" href="private_8h.html#a11">word</a>        * LARpp_j   = S-&gt;<a class="code" href="structgsm__state.html#o5">LARpp</a>[ S-&gt;<a class="code" href="structgsm__state.html#o6">j</a>     ];
00398     <a class="code" href="private_8h.html#a11">word</a>        * LARpp_j_1 = S-&gt;<a class="code" href="structgsm__state.html#o5">LARpp</a>[ S-&gt;<a class="code" href="structgsm__state.html#o6">j</a> ^=1 ];
00399 
00400     <a class="code" href="private_8h.html#a11">word</a>        LARp[8];
00401 
00402 <span class="preprocessor">#undef  FILTER</span>
00403 <span class="preprocessor"></span><span class="preprocessor">#if     defined(FAST) &amp;&amp; defined(USE_FLOAT_MUL)</span>
00404 <span class="preprocessor"></span>
00405 <span class="preprocessor">#   define  FILTER  (* (S-&gt;fast         \</span>
00406 <span class="preprocessor">               ? Fast_Short_term_synthesis_filtering    \</span>
00407 <span class="preprocessor">                   : Short_term_synthesis_filtering ))</span>
00408 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00409 <span class="preprocessor"></span><span class="preprocessor">#   define  FILTER  Short_term_synthesis_filtering</span>
00410 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00411 <span class="preprocessor"></span>
00412     Decoding_of_the_coded_Log_Area_Ratios( LARcr, LARpp_j );
00413 
00414     Coefficients_0_12( LARpp_j_1, LARpp_j, LARp );
00415     LARp_to_rp( LARp );
00416     FILTER( S, LARp, 13, wt, s );
00417 
00418     Coefficients_13_26( LARpp_j_1, LARpp_j, LARp);
00419     LARp_to_rp( LARp );
00420     FILTER( S, LARp, 14, wt + 13, s + 13 );
00421 
00422     Coefficients_27_39( LARpp_j_1, LARpp_j, LARp);
00423     LARp_to_rp( LARp );
00424     FILTER( S, LARp, 13, wt + 27, s + 27 );
00425 
00426     Coefficients_40_159( LARpp_j, LARp );
00427     LARp_to_rp( LARp );
00428     FILTER(S, LARp, 120, wt + 40, s + 40);
00429 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="short_term.c::P4" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void Short_term_analysis_filtering P4 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(S, rp, k_n, s)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>struct <a class="el" href="structgsm__state.html">gsm_state</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>register <a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>rp</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>register int&nbsp;</td>
          <td class="mdname" nowrap> <em>k_n</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>register <a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00199 {
00200     <span class="keyword">register</span> <a class="code" href="private_8h.html#a11">word</a>       * u = S-&gt;<a class="code" href="structgsm__state.html#o4">u</a>;
00201     <span class="keyword">register</span> <span class="keywordtype">int</span>        i;
00202     <span class="keyword">register</span> <a class="code" href="private_8h.html#a11">word</a>       di, zzz, ui, sav, rpi;
00203     <span class="keyword">register</span> <a class="code" href="private_8h.html#a12">longword</a>   ltmp;
00204 
00205     <span class="keywordflow">for</span> (; k_n--; s++) {
00206 
00207         di = sav = *s;
00208 
00209         <span class="keywordflow">for</span> (i = 0; i &lt; 8; i++) {       <span class="comment">/* YYY */</span>
00210 
00211             ui    = u[i];
00212             rpi   = rp[i];
00213             u[i]  = sav;
00214 
00215             zzz   = <a class="code" href="private_8h.html#a4">GSM_MULT_R</a>(rpi, di);
00216             sav   = <a class="code" href="private_8h.html#a8">GSM_ADD</a>(   ui,  zzz);
00217 
00218             zzz   = <a class="code" href="private_8h.html#a4">GSM_MULT_R</a>(rpi, ui);
00219             di    = <a class="code" href="private_8h.html#a8">GSM_ADD</a>(   di,  zzz );
00220         }
00221 
00222         *s = di;
00223     }
00224 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="short_term.c::P5" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void Short_term_synthesis_filtering P5 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(S, rrp, k, wt, sr)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>struct <a class="el" href="structgsm__state.html">gsm_state</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>register <a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>rrp</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>register int&nbsp;</td>
          <td class="mdname" nowrap> <em>k</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>register <a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>wt</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>register <a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>sr</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00272 {
00273     <span class="keyword">register</span> <a class="code" href="private_8h.html#a11">word</a>       * v = S-&gt;<a class="code" href="structgsm__state.html#o8">v</a>;
00274     <span class="keyword">register</span> <span class="keywordtype">int</span>        i;
00275     <span class="keyword">register</span> <a class="code" href="private_8h.html#a11">word</a>       sri, tmp1, tmp2;
00276     <span class="keyword">register</span> <a class="code" href="private_8h.html#a12">longword</a>   ltmp;   <span class="comment">/* for GSM_ADD  &amp; GSM_SUB */</span>
00277 
00278     <span class="keywordflow">while</span> (k--) {
00279         sri = *wt++;
00280         <span class="keywordflow">for</span> (i = 8; i--;) {
00281 
00282             <span class="comment">/* sri = GSM_SUB( sri, gsm_mult_r( rrp[i], v[i] ) );</span>
00283 <span class="comment">             */</span>
00284             tmp1 = rrp[i];
00285             tmp2 = v[i];
00286             tmp2 =  ( tmp1 == <a class="code" href="private_8h.html#a0">MIN_WORD</a> &amp;&amp; tmp2 == <a class="code" href="private_8h.html#a0">MIN_WORD</a>
00287                 ? <a class="code" href="private_8h.html#a1">MAX_WORD</a>
00288                 : 0x0FFFF &amp; (( (<a class="code" href="private_8h.html#a12">longword</a>)tmp1 * (<a class="code" href="private_8h.html#a12">longword</a>)tmp2
00289                          + 16384) &gt;&gt; 15)) ;
00290 
00291             sri  = <a class="code" href="private_8h.html#a9">GSM_SUB</a>( sri, tmp2 );
00292 
00293             <span class="comment">/* v[i+1] = GSM_ADD( v[i], gsm_mult_r( rrp[i], sri ) );</span>
00294 <span class="comment">             */</span>
00295             tmp1  = ( tmp1 == <a class="code" href="private_8h.html#a0">MIN_WORD</a> &amp;&amp; sri == <a class="code" href="private_8h.html#a0">MIN_WORD</a>
00296                 ? <a class="code" href="private_8h.html#a1">MAX_WORD</a>
00297                 : 0x0FFFF &amp; (( (<a class="code" href="private_8h.html#a12">longword</a>)tmp1 * (<a class="code" href="private_8h.html#a12">longword</a>)sri
00298                          + 16384) &gt;&gt; 15)) ;
00299 
00300             v[i+1] = <a class="code" href="private_8h.html#a8">GSM_ADD</a>( v[i], tmp1);
00301         }
00302         *sr++ = v[0] = sri;
00303     }
00304 }
</pre></div>    </td>
  </tr>
</table>
<hr><address><small>
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53></a>
<br>
FTPhone : Mon Jan 5 01:56:27 2004.

<!--
Generated at Mon Jan 5 01:56:27 2004 for FTPhone by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.4 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
-->
</body>
</html>
