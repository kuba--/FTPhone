<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//PL">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-2">
<title>add.c File Reference</title>
<link href="style.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#fffeff">
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>add.c File Reference</h1><code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;assert.h&gt;</code><br>
<code>#include "<a class="el" href="private_8h-source.html">private.h</a>"</code><br>
<code>#include "<a class="el" href="gsm_8h-source.html">gsm.h</a>"</code><br>
<code>#include "<a class="el" href="proto_8h-source.html">proto.h</a>"</code><br>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="add_8c.html#a0">saturate</a>(x)&nbsp;&nbsp;&nbsp;((x) &lt; MIN_WORD ? MIN_WORD : (x) &gt; MAX_WORD ? MAX_WORD: (x))</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="private_8h.html#a11">word</a> gsm_add&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="add_8c.html#a2">P2</a> ((a, b), <a class="el" href="private_8h.html#a11">word</a> a, <a class="el" href="private_8h.html#a11">word</a> b)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="private_8h.html#a11">word</a> gsm_abs&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="add_8c.html#a3">P1</a> ((a), <a class="el" href="private_8h.html#a11">word</a> a)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="private_8h.html#a12">longword</a> gsm_L_add&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="add_8c.html#a4">P2</a> ((a, b), <a class="el" href="private_8h.html#a12">longword</a> a, <a class="el" href="private_8h.html#a12">longword</a> b)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="private_8h.html#a11">word</a> gsm_norm&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="add_8c.html#a5">P1</a> ((a), <a class="el" href="private_8h.html#a12">longword</a> a)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="private_8h.html#a12">longword</a> gsm_L_asl&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="add_8c.html#a6">P2</a> ((a, n), <a class="el" href="private_8h.html#a12">longword</a> a, int n)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="private_8h.html#a11">word</a> gsm_asl&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="add_8c.html#a7">P2</a> ((a, n), <a class="el" href="private_8h.html#a11">word</a> a, int n)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="private_8h.html#a11">word</a> gsm_div&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="add_8c.html#a8">P2</a> ((num, denum), <a class="el" href="private_8h.html#a11">word</a> num, <a class="el" href="private_8h.html#a11">word</a> denum)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>unsigned char&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="add_8c.html#a1">bitoff</a> [256]</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="add.c::saturate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define saturate</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">x&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;((x) &lt; MIN_WORD ? MIN_WORD : (x) &gt; MAX_WORD ? MAX_WORD: (x))
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a5" doxytag="add.c::P1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="private_8h.html#a11">word</a> gsm_norm P1 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(a)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a12">longword</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>a</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00132                          : L_norm_var1 = L_var1 &lt;&lt; norm( L_var1 );
00133  *
00134  * (That's 'ffs', only from the left, not the right..)
00135  */
00136 {
00137     assert(a != 0);
00138 
00139     <span class="keywordflow">if</span> (a &lt; 0) {
00140         <span class="keywordflow">if</span> (a &lt;= -1073741824) <span class="keywordflow">return</span> 0;
00141         a = ~a;
00142     }
00143 
00144     <span class="keywordflow">return</span>    a &amp; 0xffff0000 
00145         ? ( a &amp; 0xff000000
00146           ?  -1 + <a class="code" href="add_8c.html#a1">bitoff</a>[ 0xFF &amp; (a &gt;&gt; 24) ]
00147           :   7 + <a class="code" href="add_8c.html#a1">bitoff</a>[ 0xFF &amp; (a &gt;&gt; 16) ] )
00148         : ( a &amp; 0xff00
00149           ?  15 + <a class="code" href="add_8c.html#a1">bitoff</a>[ 0xFF &amp; (a &gt;&gt; 8) ]
00150           :  23 + <a class="code" href="add_8c.html#a1">bitoff</a>[ 0xFF &amp; a ] );
00151 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="add.c::P1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="private_8h.html#a11">word</a> gsm_abs P1 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(a)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a11">word</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>a</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00052 {
00053     <span class="keywordflow">return</span> a &lt; 0 ? (a == <a class="code" href="private_8h.html#a0">MIN_WORD</a> ? <a class="code" href="private_8h.html#a1">MAX_WORD</a> : -a) : a;
00054 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="add.c::P2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="private_8h.html#a11">word</a> gsm_div P2 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(num, denum)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a11">word</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>num</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a11">word</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>denum</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00207 {
00208     <a class="code" href="private_8h.html#a12">longword</a>    L_num   = num;
00209     <a class="code" href="private_8h.html#a12">longword</a>    L_denum = denum;
00210     <a class="code" href="private_8h.html#a11">word</a>        div     = 0;
00211     <span class="keywordtype">int</span>     k   = 15;
00212 
00213     <span class="comment">/* The parameter num sometimes becomes zero.</span>
00214 <span class="comment">     * Although this is explicitly guarded against in 4.2.5,</span>
00215 <span class="comment">     * we assume that the result should then be zero as well.</span>
00216 <span class="comment">     */</span>
00217 
00218     <span class="comment">/* assert(num != 0); */</span>
00219 
00220     assert(num &gt;= 0 &amp;&amp; denum &gt;= num);
00221     <span class="keywordflow">if</span> (num == 0)
00222         <span class="keywordflow">return</span> 0;
00223 
00224     <span class="keywordflow">while</span> (k--) {
00225         div   &lt;&lt;= 1;
00226         L_num &lt;&lt;= 1;
00227 
00228         <span class="keywordflow">if</span> (L_num &gt;= L_denum) {
00229             L_num -= L_denum;
00230             div++;
00231         }
00232     }
00233 
00234     <span class="keywordflow">return</span> div;
00235 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="add.c::P2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="private_8h.html#a11">word</a> gsm_asr P2 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(a, n)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a11">word</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>a</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>n</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00162 {
00163     <span class="keywordflow">if</span> (n &gt;= 16) <span class="keywordflow">return</span> 0;
00164     <span class="keywordflow">if</span> (n &lt;= -16) <span class="keywordflow">return</span> -(a &lt; 0);
00165     <span class="keywordflow">if</span> (n &lt; 0) <span class="keywordflow">return</span> gsm_asr(a, -n);
00166     <span class="keywordflow">return</span> a &lt;&lt; n;
00167 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="add.c::P2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="private_8h.html#a12">longword</a> gsm_L_asr P2 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(a, n)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a12">longword</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>a</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>n</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00154 {
00155     <span class="keywordflow">if</span> (n &gt;= 32) <span class="keywordflow">return</span> 0;
00156     <span class="keywordflow">if</span> (n &lt;= -32) <span class="keywordflow">return</span> -(a &lt; 0);
00157     <span class="keywordflow">if</span> (n &lt; 0) <span class="keywordflow">return</span> gsm_asr(a, -n);
00158     <span class="keywordflow">return</span> a &lt;&lt; n;
00159 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="add.c::P2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="private_8h.html#a12">longword</a> gsm_L_sub P2 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(a, b)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a12">longword</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>a</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a12">longword</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>b</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00063 {
00064     <span class="keywordflow">if</span> (a &lt; 0) {
00065         <span class="keywordflow">if</span> (b &gt;= 0) <span class="keywordflow">return</span> a + b;
00066         <span class="keywordflow">else</span> {
00067             <a class="code" href="private_8h.html#a14">ulongword</a> A = (<a class="code" href="private_8h.html#a14">ulongword</a>)-(a + 1) + (<a class="code" href="private_8h.html#a14">ulongword</a>)-(b + 1);
00068             <span class="keywordflow">return</span> A &gt;= <a class="code" href="private_8h.html#a3">MAX_LONGWORD</a> ? <a class="code" href="private_8h.html#a2">MIN_LONGWORD</a> :-(<a class="code" href="private_8h.html#a12">longword</a>)A-2;
00069         }
00070     }
00071     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (b &lt;= 0) <span class="keywordflow">return</span> a + b;
00072     <span class="keywordflow">else</span> {
00073         <a class="code" href="private_8h.html#a14">ulongword</a> A = (<a class="code" href="private_8h.html#a14">ulongword</a>)a + (<a class="code" href="private_8h.html#a14">ulongword</a>)b;
00074         <span class="keywordflow">return</span> A &gt; <a class="code" href="private_8h.html#a3">MAX_LONGWORD</a> ? <a class="code" href="private_8h.html#a3">MAX_LONGWORD</a> : A;
00075     }
00076 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="add.c::P2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="private_8h.html#a12">longword</a> gsm_L_mult P2 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(a, b)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a11">word</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>a</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a11">word</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>b</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00024 {
00025     <a class="code" href="private_8h.html#a12">longword</a> sum = a + b;
00026     <span class="keywordflow">return</span> <a class="code" href="add_8c.html#a0">saturate</a>(sum);
00027 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a1" doxytag="add.c::bitoff" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> unsigned char <a class="el" href="add_8c.html#a1">bitoff</a>[ 256 ]<code> [static]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><div class="fragment"><pre> {
     8, 7, 6, 6, 5, 5, 5, 5, 4, 4, 4, 4, 4, 4, 4, 4,
     3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
     2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
     2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
     1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
     1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
     1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
     1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
     0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
}
</pre></div>    </td>
  </tr>
</table>
<hr><address><small>
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53></a>
<br>
FTPhone : Mon Jan 5 01:56:27 2004.

<!--
Generated at Mon Jan 5 01:56:27 2004 for FTPhone by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.4 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
-->
</body>
</html>
