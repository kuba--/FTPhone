<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//PL">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-2">
<title>ftplib.h File Reference</title>
<link href="style.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#fffeff">
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>ftplib.h File Reference</h1>
<p>
<a href="ftplib_8h-source.html">Go to the source code of this file.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a0">__FTPLIB_H</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a1">FTPLIB_DIR</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a2">FTPLIB_DIR_VERBOSE</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a3">FTPLIB_FILE_READ</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a4">FTPLIB_FILE_WRITE</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a5">FTPLIB_ASCII</a>&nbsp;&nbsp;&nbsp;'A'</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a6">FTPLIB_IMAGE</a>&nbsp;&nbsp;&nbsp;'I'</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a7">FTPLIB_TEXT</a>&nbsp;&nbsp;&nbsp;FTPLIB_ASCII</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a8">FTPLIB_BINARY</a>&nbsp;&nbsp;&nbsp;FTPLIB_IMAGE</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a9">FTPLIB_PASSIVE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a10">FTPLIB_PORT</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a11">FTPLIB_CONNMODE</a>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a12">FTPLIB_CALLBACK</a>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a13">FTPLIB_IDLETIME</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a14">FTPLIB_CALLBACKARG</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a15">FTPLIB_CALLBACKBYTES</a>&nbsp;&nbsp;&nbsp;5</td></tr>

<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>typedef <a class="el" href="structNetBuf.html">NetBuf</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a16">netbuf</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>typedef int(*&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a17">FtpCallback</a> )(<a class="el" href="structNetBuf.html">netbuf</a> *nControl, int xfered, void *arg)</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a19">FtpInit</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF char *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a20">FtpLastResponse</a> (<a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a21">FtpConnect</a> (const  char *host, <a class="el" href="structNetBuf.html">netbuf</a> **nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a22">FtpOptions</a> (int opt, long val, <a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a23">FtpLogin</a> (const  char *user, const  char *pass, <a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a24">FtpAccess</a> (const  char *path, int typ, int mode, <a class="el" href="structNetBuf.html">netbuf</a> *nControl, <a class="el" href="structNetBuf.html">netbuf</a> **nData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a25">FtpRead</a> (void *buf, int max, <a class="el" href="structNetBuf.html">netbuf</a> *nData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a26">FtpWrite</a> (void *buf, int len, <a class="el" href="structNetBuf.html">netbuf</a> *nData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a27">FtpClose</a> (<a class="el" href="structNetBuf.html">netbuf</a> *nData)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a28">FtpSite</a> (const  char *cmd, <a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a29">FtpSysType</a> (char *buf, int max, <a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a30">FtpMkdir</a> (const  char *path, <a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a31">FtpChdir</a> (const  char *path, <a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a32">FtpCDUp</a> (<a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a33">FtpRmdir</a> (const  char *path, <a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a34">FtpPwd</a> (char *path, int max, <a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a35">FtpNlst</a> (const  char *output, const  char *path, <a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a36">FtpDir</a> (const  char *output, const  char *path, <a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a37">FtpSize</a> (const  char *path, int *size, char mode, <a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a38">FtpModDate</a> (const  char *path, char *dt, int max, <a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a39">FtpGet</a> (const  char *output, const  char *path, char mode, <a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a40">FtpPut</a> (const  char *input, const  char *path, char mode, <a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a41">FtpRename</a> (const  char *src, const  char *dst, <a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a42">FtpDelete</a> (const  char *fnm, <a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF void&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a43">FtpQuit</a> (<a class="el" href="structNetBuf.html">netbuf</a> *nControl)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>GLOBALREF int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="ftplib_8h.html#a18">ftplib_debug</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="ftplib.h::__FTPLIB_H" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define __FTPLIB_H
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="ftplib.h::FTPLIB_ASCII" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FTPLIB_ASCII&nbsp;&nbsp;&nbsp;'A'
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="ftplib.h::FTPLIB_BINARY" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FTPLIB_BINARY&nbsp;&nbsp;&nbsp;FTPLIB_IMAGE
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="ftplib.h::FTPLIB_CALLBACK" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FTPLIB_CALLBACK&nbsp;&nbsp;&nbsp;2
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="ftplib.h::FTPLIB_CALLBACKARG" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FTPLIB_CALLBACKARG&nbsp;&nbsp;&nbsp;4
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="ftplib.h::FTPLIB_CALLBACKBYTES" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FTPLIB_CALLBACKBYTES&nbsp;&nbsp;&nbsp;5
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="ftplib.h::FTPLIB_CONNMODE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FTPLIB_CONNMODE&nbsp;&nbsp;&nbsp;1
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="ftplib.h::FTPLIB_DIR" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FTPLIB_DIR&nbsp;&nbsp;&nbsp;1
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="ftplib.h::FTPLIB_DIR_VERBOSE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FTPLIB_DIR_VERBOSE&nbsp;&nbsp;&nbsp;2
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="ftplib.h::FTPLIB_FILE_READ" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FTPLIB_FILE_READ&nbsp;&nbsp;&nbsp;3
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="ftplib.h::FTPLIB_FILE_WRITE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FTPLIB_FILE_WRITE&nbsp;&nbsp;&nbsp;4
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="ftplib.h::FTPLIB_IDLETIME" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FTPLIB_IDLETIME&nbsp;&nbsp;&nbsp;3
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="ftplib.h::FTPLIB_IMAGE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FTPLIB_IMAGE&nbsp;&nbsp;&nbsp;'I'
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="ftplib.h::FTPLIB_PASSIVE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FTPLIB_PASSIVE&nbsp;&nbsp;&nbsp;1
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="ftplib.h::FTPLIB_PORT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FTPLIB_PORT&nbsp;&nbsp;&nbsp;2
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="ftplib.h::FTPLIB_TEXT" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define FTPLIB_TEXT&nbsp;&nbsp;&nbsp;FTPLIB_ASCII
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a17" doxytag="ftplib.h::FtpCallback" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef int(* <a class="el" href="ftplib_8h.html#a17">FtpCallback</a>)(<a class="el" href="structNetBuf.html">netbuf</a> *nControl, int xfered, void *arg)
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="ftplib.h::netbuf" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct <a class="el" href="structNetBuf.html">NetBuf</a> <a class="el" href="structNetBuf.html">netbuf</a>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a24" doxytag="ftplib.h::FtpAccess" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpAccess </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>path</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>typ</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>mode</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nControl</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>nData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00801 {
00802   <span class="keywordtype">char</span> buf[256];
00803   <span class="keywordtype">int</span> dir;
00804   <span class="keywordflow">if</span> ((path == NULL) &amp;&amp;
00805       ((typ == <a class="code" href="ftplib_8h.html#a4">FTPLIB_FILE_WRITE</a>) || (typ == <a class="code" href="ftplib_8h.html#a3">FTPLIB_FILE_READ</a>)))
00806     {
00807       sprintf(nControl-&gt;<a class="code" href="structNetBuf.html#o16">response</a>,
00808           <span class="stringliteral">"Missing path argument for file transfer\n"</span>);
00809       <span class="keywordflow">return</span> 0;
00810     }
00811   sprintf(buf, <span class="stringliteral">"TYPE %c"</span>, mode);
00812   <span class="keywordflow">if</span> (!<a class="code" href="ftplib_8c.html#a18">FtpSendCmd</a>(buf, <span class="charliteral">'2'</span>, nControl))
00813     <span class="keywordflow">return</span> 0;
00814   <span class="keywordflow">switch</span> (typ)
00815     {
00816     <span class="keywordflow">case</span> <a class="code" href="ftplib_8h.html#a1">FTPLIB_DIR</a>:
00817       strcpy(buf,<span class="stringliteral">"NLST"</span>);
00818       dir = <a class="code" href="ftplib_8c.html#a5">FTPLIB_READ</a>;
00819       <span class="keywordflow">break</span>;
00820     <span class="keywordflow">case</span> <a class="code" href="ftplib_8h.html#a2">FTPLIB_DIR_VERBOSE</a>:
00821       strcpy(buf,<span class="stringliteral">"LIST"</span>);
00822       dir = <a class="code" href="ftplib_8c.html#a5">FTPLIB_READ</a>;
00823       <span class="keywordflow">break</span>;
00824     <span class="keywordflow">case</span> <a class="code" href="ftplib_8h.html#a3">FTPLIB_FILE_READ</a>:
00825       strcpy(buf,<span class="stringliteral">"RETR"</span>);
00826       dir = <a class="code" href="ftplib_8c.html#a5">FTPLIB_READ</a>;
00827       <span class="keywordflow">break</span>;
00828     <span class="keywordflow">case</span> <a class="code" href="ftplib_8h.html#a4">FTPLIB_FILE_WRITE</a>:
00829       strcpy(buf,<span class="stringliteral">"STOR"</span>);
00830       dir = <a class="code" href="ftplib_8c.html#a6">FTPLIB_WRITE</a>;
00831       <span class="keywordflow">break</span>;
00832     <span class="keywordflow">default</span>:
00833       sprintf(nControl-&gt;<a class="code" href="structNetBuf.html#o16">response</a>, <span class="stringliteral">"Invalid open type %d\n"</span>, typ);
00834       <span class="keywordflow">return</span> 0;
00835     }
00836   <span class="keywordflow">if</span> (path != NULL)
00837     {
00838       <span class="keywordtype">int</span> i = strlen(buf);
00839       buf[i++] = <span class="charliteral">' '</span>;
00840       <span class="keywordflow">if</span> ((strlen(path) + i) &gt;= <span class="keyword">sizeof</span>(buf))
00841     <span class="keywordflow">return</span> 0;
00842       strcpy(&amp;buf[i],path);
00843     }
00844   <span class="keywordflow">if</span> (<a class="code" href="ftplib_8c.html#a20">FtpOpenPort</a>(nControl, nData, mode, dir) == -1)
00845     <span class="keywordflow">return</span> 0;
00846   <span class="keywordflow">if</span> (!<a class="code" href="ftplib_8c.html#a18">FtpSendCmd</a>(buf, <span class="charliteral">'1'</span>, nControl))
00847     {
00848       <a class="code" href="ftplib_8c.html#a25">FtpClose</a>(*nData);
00849       *nData = NULL;
00850       <span class="keywordflow">return</span> 0;
00851     }
00852   (*nData)-&gt;<a class="code" href="structNetBuf.html#o7">ctrl</a> = nControl;
00853   nControl-&gt;<a class="code" href="structNetBuf.html#o8">data</a> = *nData;
00854   <span class="keywordflow">if</span> (nControl-&gt;<a class="code" href="structNetBuf.html#o9">cmode</a> == <a class="code" href="ftplib_8h.html#a10">FTPLIB_PORT</a>)
00855     {
00856       <span class="keywordflow">if</span> (!<a class="code" href="ftplib_8c.html#a21">FtpAcceptConnection</a>(*nData,nControl))
00857     {
00858       <a class="code" href="ftplib_8c.html#a25">FtpClose</a>(*nData);
00859       *nData = NULL;
00860       nControl-&gt;<a class="code" href="structNetBuf.html#o8">data</a> = NULL;
00861       <span class="keywordflow">return</span> 0;
00862     }
00863     }
00864   <span class="keywordflow">return</span> 1;
00865 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="ftplib.h::FtpCDUp" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpCDUp </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>nControl</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>01048 {
01049   <span class="keywordflow">if</span> (!<a class="code" href="ftplib_8c.html#a18">FtpSendCmd</a>(<span class="stringliteral">"CDUP"</span>,<span class="charliteral">'2'</span>,nControl))
01050     <span class="keywordflow">return</span> 0;
01051   <span class="keywordflow">return</span> 1;
01052 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="ftplib.h::FtpChdir" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpChdir </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>path</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nControl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>01031 {
01032   <span class="keywordtype">char</span> buf[256];
01033 
01034   <span class="keywordflow">if</span> ((strlen(path) + 6) &gt; <span class="keyword">sizeof</span>(buf))
01035     <span class="keywordflow">return</span> 0;
01036   sprintf(buf,<span class="stringliteral">"CWD %s"</span>,path);
01037   <span class="keywordflow">if</span> (!<a class="code" href="ftplib_8c.html#a18">FtpSendCmd</a>(buf,<span class="charliteral">'2'</span>,nControl))
01038     <span class="keywordflow">return</span> 0;
01039   <span class="keywordflow">return</span> 1;
01040 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="ftplib.h::FtpClose" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpClose </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>nData</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00934 {
00935   <a class="code" href="structNetBuf.html">netbuf</a> *ctrl;
00936   <span class="keywordflow">switch</span> (nData-&gt;<a class="code" href="structNetBuf.html#o6">dir</a>)
00937     {
00938     <span class="keywordflow">case</span> <a class="code" href="ftplib_8c.html#a6">FTPLIB_WRITE</a>:
00939       <span class="comment">/* potential problem - if buffer flush fails, how to notify user? */</span>
00940       <span class="keywordflow">if</span> (nData-&gt;<a class="code" href="structNetBuf.html#o5">buf</a> != NULL)
00941     <a class="code" href="ftplib_8c.html#a12">writeline</a>(NULL, 0, nData);
00942     <span class="keywordflow">case</span> <a class="code" href="ftplib_8c.html#a5">FTPLIB_READ</a>:
00943       <span class="keywordflow">if</span> (nData-&gt;<a class="code" href="structNetBuf.html#o5">buf</a>)
00944     free(nData-&gt;<a class="code" href="structNetBuf.html#o5">buf</a>);
00945       shutdown(nData-&gt;<a class="code" href="structNetBuf.html#o2">handle</a>,2);
00946       net_close(nData-&gt;<a class="code" href="structNetBuf.html#o2">handle</a>);
00947       ctrl = nData-&gt;<a class="code" href="structNetBuf.html#o7">ctrl</a>;
00948       free(nData);
00949       <span class="keywordflow">if</span> (ctrl)
00950     {
00951       ctrl-&gt;<a class="code" href="structNetBuf.html#o8">data</a> = NULL;
00952       <span class="keywordflow">return</span>(<a class="code" href="ftplib_8c.html#a13">readresp</a>(<span class="charliteral">'2'</span>, ctrl));
00953     }
00954       <span class="keywordflow">return</span> 1;
00955     <span class="keywordflow">case</span> <a class="code" href="ftplib_8c.html#a4">FTPLIB_CONTROL</a>:
00956       <span class="keywordflow">if</span> (nData-&gt;<a class="code" href="structNetBuf.html#o8">data</a>)
00957     {
00958       nData-&gt;<a class="code" href="structNetBuf.html#o7">ctrl</a> = NULL;
00959       <a class="code" href="ftplib_8c.html#a25">FtpClose</a>(nData);
00960     }
00961       net_close(nData-&gt;<a class="code" href="structNetBuf.html#o2">handle</a>);
00962       free(nData);
00963       <span class="keywordflow">return</span> 0;
00964     }
00965   <span class="keywordflow">return</span> 1;
00966 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="ftplib.h::FtpConnect" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpConnect </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>host</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>nControl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00387 {
00388   <span class="keywordtype">int</span> sControl;
00389   <span class="keyword">struct </span>sockaddr_in sin;
00390   <span class="keyword">struct </span>hostent *phe;
00391   <span class="keyword">struct </span>servent *pse;
00392   <span class="keywordtype">int</span> on=1;
00393   <a class="code" href="structNetBuf.html">netbuf</a> *ctrl;
00394   <span class="keywordtype">char</span> *lhost;
00395   <span class="keywordtype">char</span> *pnum;
00396 
00397   memset(&amp;sin,0,<span class="keyword">sizeof</span>(sin));
00398   sin.sin_family = AF_INET;
00399   lhost = strdup(host);
00400   pnum = strchr(lhost,<span class="charliteral">':'</span>);
00401   <span class="keywordflow">if</span> (pnum == NULL)
00402     {
00403 <span class="preprocessor">#if defined(VMS)</span>
00404 <span class="preprocessor"></span>      sin.sin_port = htons(21);
00405 <span class="preprocessor">#else</span>
00406 <span class="preprocessor"></span>      <span class="keywordflow">if</span> ((pse = getservbyname(<span class="stringliteral">"ftp"</span>,<span class="stringliteral">"tcp"</span>)) == NULL)
00407         {
00408       perror(<span class="stringliteral">"getservbyname"</span>);
00409       <span class="keywordflow">return</span> 0;
00410         }
00411       sin.sin_port = pse-&gt;s_port;
00412 <span class="preprocessor">#endif</span>
00413 <span class="preprocessor"></span>    }
00414   <span class="keywordflow">else</span>
00415     {
00416       *pnum++ = <span class="charliteral">'\0'</span>;
00417       <span class="keywordflow">if</span> (isdigit(*pnum))
00418     sin.sin_port = htons(atoi(pnum));
00419       <span class="keywordflow">else</span>
00420     {
00421       pse = getservbyname(pnum,<span class="stringliteral">"tcp"</span>);
00422       sin.sin_port = pse-&gt;s_port;
00423     }
00424     }
00425   <span class="keywordflow">if</span> ((sin.sin_addr.s_addr = inet_addr(lhost)) == -1)
00426     {
00427       <span class="keywordflow">if</span> ((phe = gethostbyname(lhost)) == NULL)
00428         {
00429       perror(<span class="stringliteral">"gethostbyname"</span>);
00430       <span class="keywordflow">return</span> 0;
00431         }
00432       memcpy((<span class="keywordtype">char</span> *)&amp;sin.sin_addr, phe-&gt;h_addr, phe-&gt;h_length);
00433     }
00434   free(lhost);
00435   sControl = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);
00436   <span class="keywordflow">if</span> (sControl == -1)
00437     {
00438       perror(<span class="stringliteral">"socket"</span>);
00439       <span class="keywordflow">return</span> 0;
00440     }
00441   <span class="keywordflow">if</span> (setsockopt(sControl,SOL_SOCKET,SO_REUSEADDR,
00442          SETSOCKOPT_OPTVAL_TYPE &amp;on, <span class="keyword">sizeof</span>(on)) == -1)
00443     {
00444       perror(<span class="stringliteral">"setsockopt"</span>);
00445       net_close(sControl);
00446       <span class="keywordflow">return</span> 0;
00447     }
00448   <span class="keywordflow">if</span> (connect(sControl, (<span class="keyword">struct</span> sockaddr *)&amp;sin, <span class="keyword">sizeof</span>(sin)) == -1)
00449     {
00450       perror(<span class="stringliteral">"connect"</span>);
00451       net_close(sControl);
00452       <span class="keywordflow">return</span> 0;
00453     }
00454   ctrl = calloc(1,<span class="keyword">sizeof</span>(<a class="code" href="structNetBuf.html">netbuf</a>));
00455   <span class="keywordflow">if</span> (ctrl == NULL)
00456     {
00457       perror(<span class="stringliteral">"calloc"</span>);
00458       net_close(sControl);
00459       <span class="keywordflow">return</span> 0;
00460     }
00461   ctrl-&gt;<a class="code" href="structNetBuf.html#o5">buf</a> = malloc(FTPLIB_BUFSIZ);
00462   <span class="keywordflow">if</span> (ctrl-&gt;<a class="code" href="structNetBuf.html#o5">buf</a> == NULL)
00463     {
00464       perror(<span class="stringliteral">"calloc"</span>);
00465       net_close(sControl);
00466       free(ctrl);
00467       <span class="keywordflow">return</span> 0;
00468     }
00469   ctrl-&gt;<a class="code" href="structNetBuf.html#o2">handle</a> = sControl;
00470   ctrl-&gt;<a class="code" href="structNetBuf.html#o6">dir</a> = <a class="code" href="ftplib_8c.html#a4">FTPLIB_CONTROL</a>;
00471   ctrl-&gt;<a class="code" href="structNetBuf.html#o7">ctrl</a> = NULL;
00472   ctrl-&gt;<a class="code" href="structNetBuf.html#o9">cmode</a> = <a class="code" href="ftplib_8c.html#a7">FTPLIB_DEFMODE</a>;
00473   ctrl-&gt;<a class="code" href="structNetBuf.html#o11">idlecb</a> = NULL;
00474   ctrl-&gt;<a class="code" href="structNetBuf.html#o10">idletime</a>.tv_sec = ctrl-&gt;<a class="code" href="structNetBuf.html#o10">idletime</a>.tv_usec = 0;
00475   ctrl-&gt;<a class="code" href="structNetBuf.html#o12">idlearg</a> = NULL;
00476   ctrl-&gt;<a class="code" href="structNetBuf.html#o13">xfered</a> = 0;
00477   ctrl-&gt;<a class="code" href="structNetBuf.html#o15">xfered1</a> = 0;
00478   ctrl-&gt;<a class="code" href="structNetBuf.html#o14">cbbytes</a> = 0;
00479   <span class="keywordflow">if</span> (<a class="code" href="ftplib_8c.html#a13">readresp</a>(<span class="charliteral">'2'</span>, ctrl) == 0)
00480     {
00481       net_close(sControl);
00482       free(ctrl-&gt;<a class="code" href="structNetBuf.html#o5">buf</a>);
00483       free(ctrl);
00484       <span class="keywordflow">return</span> 0;
00485     }
00486   *nControl = ctrl;
00487   <span class="keywordflow">return</span> 1;
00488 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="ftplib.h::FtpDelete" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpDelete </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>fnm</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nControl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>01273 {
01274   <span class="keywordtype">char</span> cmd[256];
01275 
01276   <span class="keywordflow">if</span> ((strlen(fnm) + 7) &gt; <span class="keyword">sizeof</span>(cmd))
01277     <span class="keywordflow">return</span> 0;
01278   sprintf(cmd,<span class="stringliteral">"DELE %s"</span>,fnm);
01279   <span class="keywordflow">if</span> (!<a class="code" href="ftplib_8c.html#a18">FtpSendCmd</a>(cmd,<span class="charliteral">'2'</span>, nControl))
01280     <span class="keywordflow">return</span> 0;
01281   <span class="keywordflow">return</span> 1;
01282 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="ftplib.h::FtpDir" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpDir </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>output</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>path</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nControl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>01172 {
01173   <span class="keywordflow">return</span> <a class="code" href="ftplib_8c.html#a33">FtpXfer</a>(outputfile, path, nControl, FTPLIB_DIR_VERBOSE, FTPLIB_ASCII);
01174 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="ftplib.h::FtpGet" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpGet </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>output</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>path</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>char&nbsp;</td>
          <td class="mdname" nowrap> <em>mode</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nControl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>01231 {
01232   <span class="keywordflow">return</span> <a class="code" href="ftplib_8c.html#a33">FtpXfer</a>(outputfile, path, nControl, FTPLIB_FILE_READ, mode);
01233 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="ftplib.h::FtpInit" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF void FtpInit </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00358 {
00359 <span class="preprocessor">#if defined(_WIN32)</span>
00360 <span class="preprocessor"></span>  <a class="code" href="wave_8h.html#a3">WORD</a> wVersionRequested;
00361   WSADATA wsadata;
00362   <span class="keywordtype">int</span> err;
00363   wVersionRequested = MAKEWORD(1,1);
00364   <span class="keywordflow">if</span> ((err = WSAStartup(wVersionRequested,&amp;wsadata)) != 0)
00365     fprintf(stderr,<span class="stringliteral">"Network failed to start: %d\n"</span>,err);
00366   <span class="keywordflow">else</span>
00367     fprintf(stdout, <span class="stringliteral">"%s\n"</span>, version);
00368 <span class="preprocessor">#endif</span>
00369 <span class="preprocessor"></span>}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="ftplib.h::FtpLastResponse" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF char* FtpLastResponse </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>nControl</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00375 {
00376   <span class="keywordflow">if</span> ((nControl) &amp;&amp; (nControl-&gt;<a class="code" href="structNetBuf.html#o6">dir</a> == <a class="code" href="ftplib_8c.html#a4">FTPLIB_CONTROL</a>))
00377     <span class="keywordflow">return</span> nControl-&gt;<a class="code" href="structNetBuf.html#o16">response</a>;
00378   <span class="keywordflow">return</span> NULL;
00379 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="ftplib.h::FtpLogin" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpLogin </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>user</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>pass</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nControl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00559 {
00560   <span class="keywordtype">char</span> tempbuf[64];
00561 
00562   <span class="keywordflow">if</span> (((strlen(user) + 7) &gt; <span class="keyword">sizeof</span>(tempbuf)) ||
00563       ((strlen(pass) + 7) &gt; <span class="keyword">sizeof</span>(tempbuf)))
00564     <span class="keywordflow">return</span> 0;
00565   sprintf(tempbuf,<span class="stringliteral">"USER %s"</span>,user);
00566   <span class="keywordflow">if</span> (!<a class="code" href="ftplib_8c.html#a18">FtpSendCmd</a>(tempbuf,<span class="charliteral">'3'</span>,nControl))
00567     {
00568       <span class="keywordflow">if</span> (nControl-&gt;<a class="code" href="structNetBuf.html#o16">response</a>[0] == <span class="charliteral">'2'</span>)
00569     <span class="keywordflow">return</span> 1;
00570       <span class="keywordflow">return</span> 0;
00571     }
00572   sprintf(tempbuf,<span class="stringliteral">"PASS %s"</span>,pass);
00573   <span class="keywordflow">return</span> <a class="code" href="ftplib_8c.html#a18">FtpSendCmd</a>(tempbuf,<span class="charliteral">'2'</span>,nControl);
00574 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="ftplib.h::FtpMkdir" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpMkdir </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>path</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nControl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>01014 {
01015   <span class="keywordtype">char</span> buf[256];
01016 
01017   <span class="keywordflow">if</span> ((strlen(path) + 6) &gt; <span class="keyword">sizeof</span>(buf))
01018     <span class="keywordflow">return</span> 0;
01019   sprintf(buf,<span class="stringliteral">"MKD %s"</span>,path);
01020   <span class="keywordflow">if</span> (!<a class="code" href="ftplib_8c.html#a18">FtpSendCmd</a>(buf,<span class="charliteral">'2'</span>, nControl))
01021     <span class="keywordflow">return</span> 0;
01022   <span class="keywordflow">return</span> 1;
01023 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="ftplib.h::FtpModDate" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpModDate </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>path</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>dt</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>max</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nControl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>01210 {
01211   <span class="keywordtype">char</span> buf[256];
01212   <span class="keywordtype">int</span> rv = 1;
01213 
01214   <span class="keywordflow">if</span> ((strlen(path) + 7) &gt; <span class="keyword">sizeof</span>(buf))
01215     <span class="keywordflow">return</span> 0;
01216   sprintf(buf,<span class="stringliteral">"MDTM %s"</span>,path);
01217   <span class="keywordflow">if</span> (!<a class="code" href="ftplib_8c.html#a18">FtpSendCmd</a>(buf,<span class="charliteral">'2'</span>,nControl))
01218     rv = 0;
01219   <span class="keywordflow">else</span>
01220     strncpy(dt, &amp;nControl-&gt;<a class="code" href="structNetBuf.html#o16">response</a>[4], max);
01221   <span class="keywordflow">return</span> rv;
01222 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="ftplib.h::FtpNlst" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpNlst </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>output</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>path</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nControl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>01162 {
01163   <span class="keywordflow">return</span> <a class="code" href="ftplib_8c.html#a33">FtpXfer</a>(outputfile, path, nControl, FTPLIB_DIR, FTPLIB_ASCII);
01164 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="ftplib.h::FtpOptions" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpOptions </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>opt</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>val</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nControl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00496 {
00497   <span class="keywordtype">int</span> v,rv=0;
00498   <span class="keywordflow">switch</span> (opt)
00499     {
00500     <span class="keywordflow">case</span> <a class="code" href="ftplib_8h.html#a11">FTPLIB_CONNMODE</a>:
00501       v = (<span class="keywordtype">int</span>) val;
00502       <span class="keywordflow">if</span> ((v == <a class="code" href="ftplib_8h.html#a9">FTPLIB_PASSIVE</a>) || (v == <a class="code" href="ftplib_8h.html#a10">FTPLIB_PORT</a>))
00503     {
00504       nControl-&gt;<a class="code" href="structNetBuf.html#o9">cmode</a> = v;
00505       rv = 1;
00506     }
00507       <span class="keywordflow">break</span>;
00508     <span class="keywordflow">case</span> <a class="code" href="ftplib_8h.html#a12">FTPLIB_CALLBACK</a>:
00509       nControl-&gt;<a class="code" href="structNetBuf.html#o11">idlecb</a> = (<a class="code" href="ftplib_8h.html#a17">FtpCallback</a>) val;
00510       rv = 1;
00511       <span class="keywordflow">break</span>;
00512     <span class="keywordflow">case</span> <a class="code" href="ftplib_8h.html#a13">FTPLIB_IDLETIME</a>:
00513       v = (<span class="keywordtype">int</span>) val;
00514       rv = 1;
00515       nControl-&gt;<a class="code" href="structNetBuf.html#o10">idletime</a>.tv_sec = v / 1000;
00516       nControl-&gt;<a class="code" href="structNetBuf.html#o10">idletime</a>.tv_usec = (v % 1000) * 1000;
00517       <span class="keywordflow">break</span>;
00518     <span class="keywordflow">case</span> <a class="code" href="ftplib_8h.html#a14">FTPLIB_CALLBACKARG</a>:
00519       rv = 1;
00520       nControl-&gt;<a class="code" href="structNetBuf.html#o12">idlearg</a> = (<span class="keywordtype">void</span> *) val;
00521       <span class="keywordflow">break</span>;
00522     <span class="keywordflow">case</span> <a class="code" href="ftplib_8h.html#a15">FTPLIB_CALLBACKBYTES</a>:
00523       rv = 1;
00524       nControl-&gt;<a class="code" href="structNetBuf.html#o14">cbbytes</a> = (<span class="keywordtype">int</span>) val;
00525       <span class="keywordflow">break</span>;
00526     }
00527   <span class="keywordflow">return</span> rv;
00528 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="ftplib.h::FtpPut" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpPut </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>input</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>path</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>char&nbsp;</td>
          <td class="mdname" nowrap> <em>mode</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nControl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>01242 {
01243   <span class="keywordflow">return</span> <a class="code" href="ftplib_8c.html#a33">FtpXfer</a>(inputfile, path, nControl, FTPLIB_FILE_WRITE, mode);
01244 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="ftplib.h::FtpPwd" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpPwd </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap> <em>path</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>max</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nControl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>01077 {
01078   <span class="keywordtype">int</span> l = max;
01079   <span class="keywordtype">char</span> *b = path;
01080   <span class="keywordtype">char</span> *s;
01081   <span class="keywordflow">if</span> (!<a class="code" href="ftplib_8c.html#a18">FtpSendCmd</a>(<span class="stringliteral">"PWD"</span>,<span class="charliteral">'2'</span>,nControl))
01082     <span class="keywordflow">return</span> 0;
01083   s = strchr(nControl-&gt;<a class="code" href="structNetBuf.html#o16">response</a>, <span class="charliteral">'"'</span>);
01084   <span class="keywordflow">if</span> (s == NULL)
01085     <span class="keywordflow">return</span> 0;
01086   s++;
01087   <span class="keywordflow">while</span> ((--l) &amp;&amp; (*s) &amp;&amp; (*s != <span class="charliteral">'"'</span>))
01088     *b++ = *s++;
01089   *b++ = <span class="charliteral">'\0'</span>;
01090   <span class="keywordflow">return</span> 1;
01091 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="ftplib.h::FtpQuit" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF void FtpQuit </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>nControl</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>01290 {
01291   <span class="keywordflow">if</span> (nControl-&gt;<a class="code" href="structNetBuf.html#o6">dir</a> != <a class="code" href="ftplib_8c.html#a4">FTPLIB_CONTROL</a>)
01292     <span class="keywordflow">return</span>;
01293   <a class="code" href="ftplib_8c.html#a18">FtpSendCmd</a>(<span class="stringliteral">"QUIT"</span>,<span class="charliteral">'2'</span>,nControl);
01294   net_close(nControl-&gt;<a class="code" href="structNetBuf.html#o2">handle</a>);
01295   free(nControl-&gt;<a class="code" href="structNetBuf.html#o5">buf</a>);
01296   free(nControl);
01297 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="ftplib.h::FtpRead" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpRead </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>max</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00871 {
00872   <span class="keywordtype">int</span> i;
00873   <span class="keywordflow">if</span> (nData-&gt;<a class="code" href="structNetBuf.html#o6">dir</a> != <a class="code" href="ftplib_8c.html#a5">FTPLIB_READ</a>)
00874     <span class="keywordflow">return</span> 0;
00875   <span class="keywordflow">if</span> (nData-&gt;<a class="code" href="structNetBuf.html#o5">buf</a>)
00876     i = <a class="code" href="ftplib_8c.html#a11">readline</a>(buf, max, nData);
00877   <span class="keywordflow">else</span>
00878     {
00879       i = <a class="code" href="ftplib_8c.html#a10">socket_wait</a>(nData);
00880       <span class="keywordflow">if</span> (i != 1)
00881     <span class="keywordflow">return</span> 0;
00882       i = net_read(nData-&gt;<a class="code" href="structNetBuf.html#o2">handle</a>, buf, max);
00883     }
00884   <span class="keywordflow">if</span> (i == -1)
00885     <span class="keywordflow">return</span> 0;
00886   nData-&gt;<a class="code" href="structNetBuf.html#o13">xfered</a> += i;
00887   <span class="keywordflow">if</span> (nData-&gt;<a class="code" href="structNetBuf.html#o11">idlecb</a> &amp;&amp; nData-&gt;<a class="code" href="structNetBuf.html#o14">cbbytes</a>)
00888     {
00889       nData-&gt;<a class="code" href="structNetBuf.html#o15">xfered1</a> += i;
00890       <span class="keywordflow">if</span> (nData-&gt;<a class="code" href="structNetBuf.html#o15">xfered1</a> &gt; nData-&gt;<a class="code" href="structNetBuf.html#o14">cbbytes</a>)
00891         {
00892       <span class="keywordflow">if</span> (nData-&gt;<a class="code" href="structNetBuf.html#o11">idlecb</a>(nData, nData-&gt;<a class="code" href="structNetBuf.html#o13">xfered</a>, nData-&gt;<a class="code" href="structNetBuf.html#o12">idlearg</a>) == 0)
00893         <span class="keywordflow">return</span> 0;
00894       nData-&gt;<a class="code" href="structNetBuf.html#o15">xfered1</a> = 0;
00895         }
00896     }
00897   <span class="keywordflow">return</span> i;
00898 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="ftplib.h::FtpRename" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpRename </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>src</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>dst</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nControl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>01252 {
01253   <span class="keywordtype">char</span> cmd[256];
01254 
01255   <span class="keywordflow">if</span> (((strlen(src) + 7) &gt; <span class="keyword">sizeof</span>(cmd)) ||
01256       ((strlen(dst) + 7) &gt; <span class="keyword">sizeof</span>(cmd)))
01257     <span class="keywordflow">return</span> 0;
01258   sprintf(cmd,<span class="stringliteral">"RNFR %s"</span>,src);
01259   <span class="keywordflow">if</span> (!<a class="code" href="ftplib_8c.html#a18">FtpSendCmd</a>(cmd,<span class="charliteral">'3'</span>,nControl))
01260     <span class="keywordflow">return</span> 0;
01261   sprintf(cmd,<span class="stringliteral">"RNTO %s"</span>,dst);
01262   <span class="keywordflow">if</span> (!<a class="code" href="ftplib_8c.html#a18">FtpSendCmd</a>(cmd,<span class="charliteral">'2'</span>,nControl))
01263     <span class="keywordflow">return</span> 0;
01264   <span class="keywordflow">return</span> 1;
01265 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="ftplib.h::FtpRmdir" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpRmdir </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>path</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nControl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>01060 {
01061   <span class="keywordtype">char</span> buf[256];
01062 
01063   <span class="keywordflow">if</span> ((strlen(path) + 6) &gt; <span class="keyword">sizeof</span>(buf))
01064     <span class="keywordflow">return</span> 0;
01065   sprintf(buf,<span class="stringliteral">"RMD %s"</span>,path);
01066   <span class="keywordflow">if</span> (!<a class="code" href="ftplib_8c.html#a18">FtpSendCmd</a>(buf,<span class="charliteral">'2'</span>,nControl))
01067     <span class="keywordflow">return</span> 0;
01068   <span class="keywordflow">return</span> 1;
01069 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="ftplib.h::FtpSite" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpSite </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>cmd</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nControl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00974 {
00975   <span class="keywordtype">char</span> buf[256];
00976     
00977   <span class="keywordflow">if</span> ((strlen(cmd) + 7) &gt; <span class="keyword">sizeof</span>(buf))
00978     <span class="keywordflow">return</span> 0;
00979   sprintf(buf,<span class="stringliteral">"SITE %s"</span>,cmd);
00980   <span class="keywordflow">if</span> (!<a class="code" href="ftplib_8c.html#a18">FtpSendCmd</a>(buf,<span class="charliteral">'2'</span>,nControl))
00981     <span class="keywordflow">return</span> 0;
00982   <span class="keywordflow">return</span> 1;
00983 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="ftplib.h::FtpSize" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpSize </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>path</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>size</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>char&nbsp;</td>
          <td class="mdname" nowrap> <em>mode</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nControl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>01182 {
01183   <span class="keywordtype">char</span> cmd[256];
01184   <span class="keywordtype">int</span> resp,sz,rv=1;
01185 
01186   <span class="keywordflow">if</span> ((strlen(path) + 7) &gt; <span class="keyword">sizeof</span>(cmd))
01187     <span class="keywordflow">return</span> 0;
01188   sprintf(cmd, <span class="stringliteral">"TYPE %c"</span>, mode);
01189   <span class="keywordflow">if</span> (!<a class="code" href="ftplib_8c.html#a18">FtpSendCmd</a>(cmd, <span class="charliteral">'2'</span>, nControl))
01190     <span class="keywordflow">return</span> 0;
01191   sprintf(cmd,<span class="stringliteral">"SIZE %s"</span>,path);
01192   <span class="keywordflow">if</span> (!<a class="code" href="ftplib_8c.html#a18">FtpSendCmd</a>(cmd,<span class="charliteral">'2'</span>,nControl))
01193     rv = 0;
01194   <span class="keywordflow">else</span>
01195     {
01196       <span class="keywordflow">if</span> (sscanf(nControl-&gt;<a class="code" href="structNetBuf.html#o16">response</a>, <span class="stringliteral">"%d %d"</span>, &amp;resp, &amp;sz) == 2)
01197     *size = sz;
01198       <span class="keywordflow">else</span>
01199     rv = 0;
01200     }   
01201   <span class="keywordflow">return</span> rv;
01202 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="ftplib.h::FtpSysType" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpSysType </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">char *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>max</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nControl</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00995 {
00996   <span class="keywordtype">int</span> l = max;
00997   <span class="keywordtype">char</span> *b = buf;
00998   <span class="keywordtype">char</span> *s;
00999   <span class="keywordflow">if</span> (!<a class="code" href="ftplib_8c.html#a18">FtpSendCmd</a>(<span class="stringliteral">"SYST"</span>,<span class="charliteral">'2'</span>,nControl))
01000     <span class="keywordflow">return</span> 0;
01001   s = &amp;nControl-&gt;<a class="code" href="structNetBuf.html#o16">response</a>[4];
01002   <span class="keywordflow">while</span> ((--l) &amp;&amp; (*s != <span class="charliteral">' '</span>))
01003     *b++ = *s++;
01004   *b++ = <span class="charliteral">'\0'</span>;
01005   <span class="keywordflow">return</span> 1;
01006 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="ftplib.h::FtpWrite" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int FtpWrite </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>len</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structNetBuf.html">netbuf</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>nData</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00904 {
00905   <span class="keywordtype">int</span> i;
00906   <span class="keywordflow">if</span> (nData-&gt;<a class="code" href="structNetBuf.html#o6">dir</a> != <a class="code" href="ftplib_8c.html#a6">FTPLIB_WRITE</a>)
00907     <span class="keywordflow">return</span> 0;
00908   <span class="keywordflow">if</span> (nData-&gt;<a class="code" href="structNetBuf.html#o5">buf</a>)
00909     i = <a class="code" href="ftplib_8c.html#a12">writeline</a>(buf, len, nData);
00910   <span class="keywordflow">else</span>
00911     {
00912       <a class="code" href="ftplib_8c.html#a10">socket_wait</a>(nData);
00913       i = net_write(nData-&gt;<a class="code" href="structNetBuf.html#o2">handle</a>, buf, len);
00914     }
00915   <span class="keywordflow">if</span> (i == -1)
00916     <span class="keywordflow">return</span> 0;
00917   nData-&gt;<a class="code" href="structNetBuf.html#o13">xfered</a> += i;
00918   <span class="keywordflow">if</span> (nData-&gt;<a class="code" href="structNetBuf.html#o11">idlecb</a> &amp;&amp; nData-&gt;<a class="code" href="structNetBuf.html#o14">cbbytes</a>)
00919     {
00920       nData-&gt;<a class="code" href="structNetBuf.html#o15">xfered1</a> += i;
00921       <span class="keywordflow">if</span> (nData-&gt;<a class="code" href="structNetBuf.html#o15">xfered1</a> &gt; nData-&gt;<a class="code" href="structNetBuf.html#o14">cbbytes</a>)
00922         {
00923       nData-&gt;<a class="code" href="structNetBuf.html#o11">idlecb</a>(nData, nData-&gt;<a class="code" href="structNetBuf.html#o13">xfered</a>, nData-&gt;<a class="code" href="structNetBuf.html#o12">idlearg</a>);
00924       nData-&gt;<a class="code" href="structNetBuf.html#o15">xfered1</a> = 0;
00925         }
00926     }
00927   <span class="keywordflow">return</span> i;
00928 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a18" doxytag="ftplib.h::ftplib_debug" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> GLOBALREF int <a class="el" href="ftplib_8h.html#a18">ftplib_debug</a>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><address><small>
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53></a>
<br>
FTPhone : Mon Jan 5 01:56:27 2004.

<!--
Generated at Mon Jan 5 01:56:27 2004 for FTPhone by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.4 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
-->
</body>
</html>
