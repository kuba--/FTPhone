<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//PL">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-2">
<title>taste.c File Reference</title>
<link href="style.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#fffeff">
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>taste.c File Reference</h1><code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;memory.h&gt;</code><br>
<code>#include "<a class="el" href="config_8h-source.html">config.h</a>"</code><br>
<code>#include "<a class="el" href="proto_8h-source.html">proto.h</a>"</code><br>
<code>#include "<a class="el" href="taste_8h-source.html">taste.h</a>"</code><br>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>char *malloc&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="taste_8c.html#a3">P</a> ((char *))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char *malloc *realloc&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="taste_8c.html#a4">P</a> ((char *, int))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int exit&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="taste_8c.html#a5">P</a> ((int))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void write_code&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="taste_8c.html#a6">P</a> ((struct <a class="el" href="structspex.html">spex</a> *, int))</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char *strsave&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="taste_8c.html#a7">P1</a> ((str), char *str)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structspex.html">spex</a> *new_spex&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="taste_8c.html#a8">P0</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>char *strtek&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="taste_8c.html#a9">P2</a> ((str, sep), char *str, char *sep)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="structspex.html">spex</a> *&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="taste_8c.html#a0">s_spex</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="taste_8c.html#a1">n_spex</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="taste_8c.html#a2">m_spex</a></td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a6" doxytag="taste.c::P" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void write_code P </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(struct <a class="el" href="structspex.html">spex</a> *, int)&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="taste.c::P" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int exit P </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(int)&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="taste.c::P" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char* malloc * realloc P </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(char *, int)&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="taste.c::P" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char* malloc P </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(char *)&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="taste.c::P0" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> struct <a class="el" href="structspex.html">spex</a>* new_spex P0 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00053 {
00054     <span class="keywordflow">if</span> (<a class="code" href="taste_8c.html#a1">n_spex</a> &gt;= <a class="code" href="taste_8c.html#a2">m_spex</a>) {
00055         <a class="code" href="taste_8c.html#a2">m_spex</a> += 500;
00056         <span class="keywordflow">if</span> (!(<a class="code" href="taste_8c.html#a0">s_spex</a> = (<span class="keyword">struct </span><a class="code" href="structspex.html">spex</a> *)(<a class="code" href="taste_8c.html#a1">n_spex</a>
00057             ? realloc((<span class="keywordtype">char</span> *)s_spex, m_spex * <span class="keyword">sizeof</span>(*s_spex))
00058             : malloc( <a class="code" href="taste_8c.html#a2">m_spex</a> * sizeof(*<a class="code" href="taste_8c.html#a0">s_spex</a>))))) {
00059             fprintf(stderr, <span class="stringliteral">"Failed to malloc %d bytes, abort\n"</span>,
00060                 m_spex * <span class="keyword">sizeof</span>(*s_spex));
00061             exit(1);
00062         }
00063     }
00064     <span class="keywordflow">return</span> <a class="code" href="taste_8c.html#a0">s_spex</a> + <a class="code" href="taste_8c.html#a1">n_spex</a>;
00065 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="taste.c::P1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char* strsave P1 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(str)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>str</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00041 {
00042     <span class="keywordtype">int</span>    n = strlen(str) + 1;
00043     <span class="keywordtype">char</span> * s = malloc(n);
00044     <span class="keywordflow">if</span> (!s) {
00045         fprintf(stderr, <span class="stringliteral">"Failed to malloc %d bytes, abort\n"</span>,
00046             strlen(str) + 1);
00047         exit(1);
00048     }
00049     <span class="keywordflow">return</span> memcpy(s, str, n);
00050 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="taste.c::P2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> char* strtek P2 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(str, sep)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>str</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>sep</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00067                                                      {
00068 
00069     <span class="keyword">static</span> <span class="keywordtype">char</span>     * S = (<span class="keywordtype">char</span> *)0;
00070     <span class="keywordtype">char</span>        * c, * base;
00071 
00072     <span class="keywordflow">if</span> (str) S = str;
00073 
00074     <span class="keywordflow">if</span> (!S || !*S) <span class="keywordflow">return</span> (<span class="keywordtype">char</span> *)0;
00075 
00076     <span class="comment">/*  Skip delimiters.</span>
00077 <span class="comment">     */</span>
00078     <span class="keywordflow">while</span> (*S) {
00079         <span class="keywordflow">for</span> (c = sep; *c &amp;&amp; *c != *S; c++) ;
00080         <span class="keywordflow">if</span> (*c) *S++ = 0;
00081         <span class="keywordflow">else</span> <span class="keywordflow">break</span>;
00082     }
00083 
00084     base = S;
00085 
00086     <span class="comment">/*   Skip non-delimiters.</span>
00087 <span class="comment">     */</span>
00088     <span class="keywordflow">for</span> (base = S; *S; S++) {
00089 
00090         <span class="keywordflow">for</span> (c = sep; *c; c++)
00091             <span class="keywordflow">if</span> (*c == *S) {
00092                 *S++ = 0;
00093                 <span class="keywordflow">return</span> base;
00094             }
00095     }
00096 
00097     <span class="keywordflow">return</span> base == S ? (<span class="keywordtype">char</span> *)0 : base;
00098 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a2" doxytag="taste.c::m_spex" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int <a class="el" href="taste_8c.html#a2">m_spex</a><code> [static]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="taste.c::n_spex" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int <a class="el" href="taste_8c.html#a1">n_spex</a><code> [static]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="taste.c::s_spex" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> struct <a class="el" href="structspex.html">spex</a>* <a class="el" href="taste_8c.html#a0">s_spex</a><code> [static]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><address><small>
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53></a>
<br>
FTPhone : Mon Jan 5 01:56:27 2004.

<!--
Generated at Mon Jan 5 01:56:27 2004 for FTPhone by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.4 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
-->
</body>
</html>
