<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//PL">
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-2">
<title>lpc.c File Reference</title>
<link href="style.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#fffeff">
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="namespacemembers.html">Namespace&nbsp;Members</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a> | <a class="qindex" href="examples.html">Examples</a></div>
<h1>lpc.c File Reference</h1><code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;assert.h&gt;</code><br>
<code>#include "<a class="el" href="private_8h-source.html">private.h</a>"</code><br>
<code>#include "<a class="el" href="gsm_8h-source.html">gsm.h</a>"</code><br>
<code>#include "<a class="el" href="proto_8h-source.html">proto.h</a>"</code><br>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="lpc_8c.html#a0">SCALE</a>(n)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="lpc_8c.html#a1">STEP</a>(k)&nbsp;&nbsp;&nbsp;L_ACF[k] += (<a class="el" href="private_8h.html#a12">longword</a>)(sl * sp[ -(k) ]);</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="lpc_8c.html#a2">NEXTI</a>&nbsp;&nbsp;&nbsp;sl = *++sp</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>#define&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="lpc_8c.html#a3">STEP</a>(A, B, MAC, MIC)</td></tr>

<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>void Autocorrelation&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="lpc_8c.html#a4">P2</a> ((s, L_ACF), <a class="el" href="private_8h.html#a11">word</a> *s, <a class="el" href="private_8h.html#a12">longword</a> *L_ACF)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void Reflection_coefficients&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="lpc_8c.html#a5">P2</a> ((L_ACF, r), <a class="el" href="private_8h.html#a12">longword</a> *L_ACF, register <a class="el" href="private_8h.html#a11">word</a> *r)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void Transformation_to_Log_Area_Ratios&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="lpc_8c.html#a6">P1</a> ((r), register <a class="el" href="private_8h.html#a11">word</a> *r)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void Quantization_and_coding&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="lpc_8c.html#a7">P1</a> ((LAR), register <a class="el" href="private_8h.html#a11">word</a> *LAR)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>void Gsm_LPC_Analysis&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="lpc_8c.html#a8">P3</a> ((S, s, LARc), struct <a class="el" href="structgsm__state.html">gsm_state</a> *S, <a class="el" href="private_8h.html#a11">word</a> *s, <a class="el" href="private_8h.html#a11">word</a> *LARc)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a2" doxytag="lpc.c::NEXTI" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define NEXTI&nbsp;&nbsp;&nbsp;sl = *++sp
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="lpc.c::SCALE" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define SCALE</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">n&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre><span class="keywordflow">case</span> n: <span class="keywordflow">for</span> (k = 0; k &lt;= 159; k++) \
            s[k] = <a class="code" href="private_8h.html#a4">GSM_MULT_R</a>( s[k], 16384 &gt;&gt; (n-1) );\
        <span class="keywordflow">break</span>;
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="lpc.c::STEP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STEP</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">A,         <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>B,         <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>MAC,         <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>MIC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre>temp = <a class="code" href="private_8h.html#a5">GSM_MULT</a>( A,   *LAR );   \
        temp = <a class="code" href="private_8h.html#a8">GSM_ADD</a>(  temp,   B );   \
        temp = <a class="code" href="private_8h.html#a8">GSM_ADD</a>(  temp, 256 );   \
        temp = SASR(     temp,   9 );   \
        *LAR  =  temp&gt;MAC ? MAC - MIC : (temp&lt;MIC ? 0 : temp - MIC); \
        LAR++;
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="lpc.c::STEP" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define STEP</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">k&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;L_ACF[k] += (<a class="el" href="private_8h.html#a12">longword</a>)(sl * sp[ -(k) ]);
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a7" doxytag="lpc.c::P1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void Quantization_and_coding P1 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(LAR)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>register <a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>LAR</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00291 {
00292     <span class="keyword">register</span> <a class="code" href="private_8h.html#a11">word</a>   temp;
00293     <a class="code" href="private_8h.html#a12">longword</a>    ltmp;
00294     <a class="code" href="private_8h.html#a14">ulongword</a>   utmp;
00295 
00296 
00297     <span class="comment">/*  This procedure needs four tables; the following equations</span>
00298 <span class="comment">     *  give the optimum scaling for the constants:</span>
00299 <span class="comment">     *  </span>
00300 <span class="comment">     *  A[0..7] = integer( real_A[0..7] * 1024 )</span>
00301 <span class="comment">     *  B[0..7] = integer( real_B[0..7] *  512 )</span>
00302 <span class="comment">     *  MAC[0..7] = maximum of the LARc[0..7]</span>
00303 <span class="comment">     *  MIC[0..7] = minimum of the LARc[0..7]</span>
00304 <span class="comment">     */</span>
00305 
00306 <span class="preprocessor">#   undef STEP</span>
00307 <span class="preprocessor"></span><span class="preprocessor">#   define  STEP( A, B, MAC, MIC )      \</span>
00308 <span class="preprocessor">        temp = GSM_MULT( A,   *LAR );   \</span>
00309 <span class="preprocessor">        temp = GSM_ADD(  temp,   B );   \</span>
00310 <span class="preprocessor">        temp = GSM_ADD(  temp, 256 );   \</span>
00311 <span class="preprocessor">        temp = SASR(     temp,   9 );   \</span>
00312 <span class="preprocessor">        *LAR  =  temp&gt;MAC ? MAC - MIC : (temp&lt;MIC ? 0 : temp - MIC); \</span>
00313 <span class="preprocessor">        LAR++;</span>
00314 <span class="preprocessor"></span>
00315     STEP(  20480,     0,  31, -32 );
00316     STEP(  20480,     0,  31, -32 );
00317     STEP(  20480,  2048,  15, -16 );
00318     STEP(  20480, -2560,  15, -16 );
00319 
00320     STEP(  13964,    94,   7,  -8 );
00321     STEP(  15360, -1792,   7,  -8 );
00322     STEP(   8534,  -341,   3,  -4 );
00323     STEP(   9036, -1144,   3,  -4 );
00324 
00325 <span class="preprocessor">#   undef   STEP</span>
00326 <span class="preprocessor"></span>}
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="lpc.c::P1" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void Transformation_to_Log_Area_Ratios P1 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(r)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>register <a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>r</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00251                                                              :
00252  *
00253  *  r[..]   = integer( real_r[..]*32768. ); -1 &lt;= real_r &lt; 1.
00254  *  LAR[..] = integer( real_LAR[..] * 16384 );
00255  *  with -1.625 &lt;= real_LAR &lt;= 1.625
00256  */
00257 {
00258     <span class="keyword">register</span> <a class="code" href="private_8h.html#a11">word</a>   temp;
00259     <span class="keyword">register</span> <span class="keywordtype">int</span>    i;
00260 
00261 
00262     <span class="comment">/* Computation of the LAR[0..7] from the r[0..7]</span>
00263 <span class="comment">     */</span>
00264     <span class="keywordflow">for</span> (i = 1; i &lt;= 8; i++, r++) {
00265 
00266         temp = *r;
00267         temp = <a class="code" href="private_8h.html#a10">GSM_ABS</a>(temp);
00268         assert(temp &gt;= 0);
00269 
00270         <span class="keywordflow">if</span> (temp &lt; 22118) {
00271             temp &gt;&gt;= 1;
00272         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (temp &lt; 31130) {
00273             assert( temp &gt;= 11059 );
00274             temp -= 11059;
00275         } <span class="keywordflow">else</span> {
00276             assert( temp &gt;= 26112 );
00277             temp -= 26112;
00278             temp &lt;&lt;= 2;
00279         }
00280 
00281         *r = *r &lt; 0 ? -temp : temp;
00282         assert( *r != MIN_WORD );
00283     }
00284 }

</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="lpc.c::P2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void Reflection_coefficients P2 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(L_ACF, r)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a12">longword</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>L_ACF</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>register <a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>r</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00182 {
00183     <span class="keyword">register</span> <span class="keywordtype">int</span>    i, m, n;
00184     <span class="keyword">register</span> <a class="code" href="private_8h.html#a11">word</a>   temp;
00185     <span class="keyword">register</span> <a class="code" href="private_8h.html#a12">longword</a> ltmp;
00186     <a class="code" href="private_8h.html#a11">word</a>        ACF[9]; <span class="comment">/* 0..8 */</span>
00187     <a class="code" href="private_8h.html#a11">word</a>        <a class="code" href="proto_8h.html#a0">P</a>[  9]; <span class="comment">/* 0..8 */</span>
00188     <a class="code" href="private_8h.html#a11">word</a>        K[  9]; <span class="comment">/* 2..8 */</span>
00189 
00190     <span class="comment">/*  Schur recursion with 16 bits arithmetic.</span>
00191 <span class="comment">     */</span>
00192 
00193     <span class="keywordflow">if</span> (L_ACF[0] == 0) {    <span class="comment">/* everything is the same. */</span>
00194         <span class="keywordflow">for</span> (i = 8; i--; *r++ = 0) ;
00195         <span class="keywordflow">return</span>;
00196     }
00197 
00198     assert( L_ACF[0] != 0 );
00199     temp = gsm_norm( L_ACF[0] );
00200 
00201     assert(temp &gt;= 0 &amp;&amp; temp &lt; 32);
00202 
00203     <span class="comment">/* ? overflow ? */</span>
00204     <span class="keywordflow">for</span> (i = 0; i &lt;= 8; i++) ACF[i] = SASR( L_ACF[i] &lt;&lt; temp, 16 );
00205 
00206     <span class="comment">/*   Initialize array P[..] and K[..] for the recursion.</span>
00207 <span class="comment">     */</span>
00208 
00209     <span class="keywordflow">for</span> (i = 1; i &lt;= 7; i++) K[ i ] = ACF[ i ];
00210     <span class="keywordflow">for</span> (i = 0; i &lt;= 8; i++) <a class="code" href="proto_8h.html#a0">P</a>[ i ] = ACF[ i ];
00211 
00212     <span class="comment">/*   Compute reflection coefficients</span>
00213 <span class="comment">     */</span>
00214     <span class="keywordflow">for</span> (n = 1; n &lt;= 8; n++, r++) {
00215 
00216         temp = <a class="code" href="proto_8h.html#a0">P</a>[1];
00217         temp = <a class="code" href="private_8h.html#a10">GSM_ABS</a>(temp);
00218         <span class="keywordflow">if</span> (<a class="code" href="proto_8h.html#a0">P</a>[0] &lt; temp) {
00219             <span class="keywordflow">for</span> (i = n; i &lt;= 8; i++) *r++ = 0;
00220             <span class="keywordflow">return</span>;
00221         }
00222 
00223         *r = gsm_div( temp, P[0] );
00224 
00225         assert(*r &gt;= 0);
00226         <span class="keywordflow">if</span> (<a class="code" href="proto_8h.html#a0">P</a>[1] &gt; 0) *r = -*r;     <span class="comment">/* r[n] = sub(0, r[n]) */</span>
00227         assert (*r != MIN_WORD);
00228         <span class="keywordflow">if</span> (n == 8) <span class="keywordflow">return</span>; 
00229 
00230         <span class="comment">/*  Schur recursion</span>
00231 <span class="comment">         */</span>
00232         temp = <a class="code" href="private_8h.html#a4">GSM_MULT_R</a>( P[1], *r );
00233         <a class="code" href="proto_8h.html#a0">P</a>[0] = <a class="code" href="private_8h.html#a8">GSM_ADD</a>( P[0], temp );
00234 
00235         <span class="keywordflow">for</span> (m = 1; m &lt;= 8 - n; m++) {
00236             temp     = <a class="code" href="private_8h.html#a4">GSM_MULT_R</a>( K[ m   ],    *r );
00237             <a class="code" href="proto_8h.html#a0">P</a>[m]     = <a class="code" href="private_8h.html#a8">GSM_ADD</a>(    P[ m+1 ],  temp );
00238 
00239             temp     = <a class="code" href="private_8h.html#a4">GSM_MULT_R</a>( P[ m+1 ],    *r );
00240             K[m]     = <a class="code" href="private_8h.html#a8">GSM_ADD</a>(    K[ m   ],  temp );
00241         }
00242     }
00243 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="lpc.c::P2" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void Autocorrelation P2 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(s, L_ACF)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a12">longword</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>L_ACF</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00033 {
00034     <span class="keyword">register</span> <span class="keywordtype">int</span>    k, i;
00035 
00036     <a class="code" href="private_8h.html#a11">word</a>        temp, smax, scalauto;
00037     <a class="code" href="private_8h.html#a12">longword</a>    L_temp;
00038 
00039 <span class="preprocessor">#ifdef  USE_FLOAT_MUL</span>
00040 <span class="preprocessor"></span>    <span class="keywordtype">float</span>       float_s[160];
00041     <a class="code" href="private_8h.html#a12">longword</a>    L_temp2;
00042 <span class="preprocessor">#else</span>
00043 <span class="preprocessor"></span>    <a class="code" href="private_8h.html#a12">longword</a>    L_temp2;
00044 <span class="preprocessor">#endif</span>
00045 <span class="preprocessor"></span>
00046     <span class="comment">/*  Dynamic scaling of the array  s[0..159]</span>
00047 <span class="comment">     */</span>
00048 
00049     <span class="comment">/*  Search for the maximum.</span>
00050 <span class="comment">     */</span>
00051     smax = 0;
00052     <span class="keywordflow">for</span> (k = 0; k &lt;= 159; k++) {
00053         temp = <a class="code" href="private_8h.html#a10">GSM_ABS</a>( s[k] );
00054         <span class="keywordflow">if</span> (temp &gt; smax) smax = temp;
00055     }
00056 
00057     <span class="comment">/*  Computation of the scaling factor.</span>
00058 <span class="comment">     */</span>
00059     <span class="keywordflow">if</span> (smax == 0) scalauto = 0;
00060     <span class="keywordflow">else</span> {
00061         assert(smax &gt; 0);
00062         scalauto = 4 - gsm_norm( (<a class="code" href="private_8h.html#a12">longword</a>)smax &lt;&lt; 16 );<span class="comment">/* sub(4,..) */</span>
00063     }
00064 
00065     <span class="comment">/*  Scaling of the array s[0...159]</span>
00066 <span class="comment">     */</span>
00067 
00068     <span class="keywordflow">if</span> (scalauto &gt; 0) {
00069 
00070 <span class="preprocessor"># ifdef USE_FLOAT_MUL</span>
00071 <span class="preprocessor"></span><span class="preprocessor">#   define SCALE(n) \</span>
00072 <span class="preprocessor">    case n: for (k = 0; k &lt;= 159; k++) \</span>
00073 <span class="preprocessor">            float_s[k] = (float)    \</span>
00074 <span class="preprocessor">                (s[k] = GSM_MULT_R(s[k], 16384 &gt;&gt; (n-1)));\</span>
00075 <span class="preprocessor">        break;</span>
00076 <span class="preprocessor"></span><span class="preprocessor"># else </span>
00077 <span class="preprocessor"></span><span class="preprocessor">#   define SCALE(n) \</span>
00078 <span class="preprocessor">    case n: for (k = 0; k &lt;= 159; k++) \</span>
00079 <span class="preprocessor">            s[k] = GSM_MULT_R( s[k], 16384 &gt;&gt; (n-1) );\</span>
00080 <span class="preprocessor">        break;</span>
00081 <span class="preprocessor"></span><span class="preprocessor"># endif </span><span class="comment">/* USE_FLOAT_MUL */</span>
00082 
00083         <span class="keywordflow">switch</span> (scalauto) {
00084         SCALE(1)
00085         SCALE(2)
00086         SCALE(3)
00087         SCALE(4)
00088         }
00089 <span class="preprocessor"># undef SCALE</span>
00090 <span class="preprocessor"></span>    }
00091 <span class="preprocessor"># ifdef USE_FLOAT_MUL</span>
00092 <span class="preprocessor"></span>    <span class="keywordflow">else</span> <span class="keywordflow">for</span> (k = 0; k &lt;= 159; k++) float_s[k] = (<span class="keywordtype">float</span>) s[k];
00093 <span class="preprocessor"># endif</span>
00094 <span class="preprocessor"></span>
00095     <span class="comment">/*  Compute the L_ACF[..].</span>
00096 <span class="comment">     */</span>
00097     {
00098 <span class="preprocessor"># ifdef USE_FLOAT_MUL</span>
00099 <span class="preprocessor"></span>        <span class="keyword">register</span> <span class="keywordtype">float</span> * sp = float_s;
00100         <span class="keyword">register</span> <span class="keywordtype">float</span>   sl = *sp;
00101 <span class="preprocessor"># else</span>
00102 <span class="preprocessor"></span>        <a class="code" href="private_8h.html#a11">word</a>  * sp = s;
00103         <a class="code" href="private_8h.html#a11">word</a>    sl = *sp;
00104 <span class="preprocessor"># endif</span>
00105 <span class="preprocessor"></span>
00106 <span class="preprocessor">#   define STEP(k)   L_ACF[k] += (longword)(sl * sp[ -(k) ]);</span>
00107 <span class="preprocessor"></span><span class="preprocessor">#   define NEXTI     sl = *++sp</span>
00108 <span class="preprocessor"></span>
00109 
00110     <span class="keywordflow">for</span> (k = 9; k--; L_ACF[k] = 0) ;
00111 
00112     STEP (0);
00113     NEXTI;
00114     STEP(0); STEP(1);
00115     NEXTI;
00116     STEP(0); STEP(1); STEP(2);
00117     NEXTI;
00118     STEP(0); STEP(1); STEP(2); STEP(3);
00119     NEXTI;
00120     STEP(0); STEP(1); STEP(2); STEP(3); STEP(4);
00121     NEXTI;
00122     STEP(0); STEP(1); STEP(2); STEP(3); STEP(4); STEP(5);
00123     NEXTI;
00124     STEP(0); STEP(1); STEP(2); STEP(3); STEP(4); STEP(5); STEP(6);
00125     NEXTI;
00126     STEP(0); STEP(1); STEP(2); STEP(3); STEP(4); STEP(5); STEP(6); STEP(7);
00127 
00128     <span class="keywordflow">for</span> (i = 8; i &lt;= 159; i++) {
00129 
00130         NEXTI;
00131 
00132         STEP(0);
00133         STEP(1); STEP(2); STEP(3); STEP(4);
00134         STEP(5); STEP(6); STEP(7); STEP(8);
00135     }
00136 
00137     <span class="keywordflow">for</span> (k = 9; k--; L_ACF[k] &lt;&lt;= 1) ; 
00138 
00139     }
00140     <span class="comment">/*   Rescaling of the array s[0..159]</span>
00141 <span class="comment">     */</span>
00142     <span class="keywordflow">if</span> (scalauto &gt; 0) {
00143         assert(scalauto &lt;= 4); 
00144         <span class="keywordflow">for</span> (k = 160; k--; *s++ &lt;&lt;= scalauto) ;
00145     }
00146 }
</pre></div>    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="lpc.c::P3" ></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void Gsm_LPC_Analysis P3 </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">(S, s, LARc)&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>struct <a class="el" href="structgsm__state.html">gsm_state</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>s</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="private_8h.html#a11">word</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>LARc</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
<div class="fragment"><pre>00332 {
00333     <a class="code" href="private_8h.html#a12">longword</a>    L_ACF[9];
00334 
00335 <span class="preprocessor">#if defined(USE_FLOAT_MUL) &amp;&amp; defined(FAST)</span>
00336 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (S-&gt;<a class="code" href="structgsm__state.html#o11">fast</a>) Fast_Autocorrelation (s,     L_ACF );
00337     <span class="keywordflow">else</span>
00338 <span class="preprocessor">#endif</span>
00339 <span class="preprocessor"></span>    Autocorrelation           (s,     L_ACF );
00340     Reflection_coefficients       (L_ACF, LARc  );
00341     Transformation_to_Log_Area_Ratios (LARc);
00342     Quantization_and_coding       (LARc);
00343 }
</pre></div>    </td>
  </tr>
</table>
<hr><address><small>
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53></a>
<br>
FTPhone : Mon Jan 5 01:56:27 2004.

<!--
Generated at Mon Jan 5 01:56:27 2004 for FTPhone by <a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 width=110 height=53>
</a> 1.3.4 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
-->
</body>
</html>
